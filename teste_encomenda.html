<!DOCTYPE html>
<html>
<head>
    <title>Teste Encomenda</title>
</head>
<body>
    <h1>Teste de Encomenda</h1>
    <button onclick="testarController()">Testar Controller</button>
    <button onclick="listarEncomendas()">Listar Encomendas</button>
    <button onclick="criarEncomenda()">Criar Encomenda Teste</button>
    <div id="resultado"></div>

    <script>
        async function testarController() {
            try {
                const response = await fetch('http://localhost:8080/encomendas/teste');
                const data = await response.text();
                document.getElementById('resultado').innerHTML = '<h3>Teste Controller:</h3><pre>' + data + '</pre>';
            } catch (error) {
                document.getElementById('resultado').innerHTML = '<h3>Erro:</h3><pre>' + error + '</pre>';
            }
        }

        async function listarEncomendas() {
            try {
                const response = await fetch('http://localhost:8080/encomendas/listar');
                const data = await response.json();
                document.getElementById('resultado').innerHTML = '<h3>Encomendas:</h3><pre>' + JSON.stringify(data, null, 2) + '</pre>';
            } catch (error) {
                document.getElementById('resultado').innerHTML = '<h3>Erro:</h3><pre>' + error + '</pre>';
            }
        }

        async function criarEncomenda() {
            try {
                const dados = {
                    usuarioId: 1,
                    produtoId: 1,
                    quantidade: 2,
                    preco: 25.50,
                    valorTotal: 51.00,
                    dataEncomenda: new Date().toISOString()
                };

                console.log('Enviando:', dados);
                const response = await fetch('http://localhost:8080/encomendas/salvar', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(dados)
                });
                
                const data = await response.text();
                document.getElementById('resultado').innerHTML = '<h3>Criar Encomenda:</h3><pre>' + data + '</pre>';
                
                // Listar ap√≥s criar
                setTimeout(listarEncomendas, 1000);
            } catch (error) {
                document.getElementById('resultado').innerHTML = '<h3>Erro:</h3><pre>' + error + '</pre>';
            }
        }
    </script>
</body>
</html>